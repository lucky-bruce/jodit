<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Jodit Example</title>
    <script>
        var simulateEvent = function (type, keyCodeArg, element, options) {
            var evt = document.createEvent('HTMLEvents')
            evt.initEvent(type, true, false);
            evt.keyCode = keyCodeArg;
            evt.which = keyCodeArg;
            if (options) {
                options(evt);
            }
            element.dispatchEvent(evt);
        }
    </script>
</head>
<body>
    <table style="width:100%">
        <tr>
            <td style="width:50%">
                <textarea id="editor"></textarea>
                <div class="buttons">
                    <button id="merge">Merge</button>
                    <button id="splithorizontal">Split by Horizontal</button>
                    <button id="splitvertical">Split by vertical</button>
                </div>
            </td>
            <td><textarea id="mirror"></textarea></td>
        </tr>
        <!--<tr>-->
            <!--<td colspan="2"><textarea id="consoles" cols="30" rows="10"></textarea></td>-->
        <!--</tr>-->
    </table>
    <style>
        .jodit.jodit_editor, textarea {
            box-sizing: border-box;
            display: block;
            width: 100%;
            min-height: 200px;
            border:1px solid #ccc;
        }
    </style>
</body>
<link rel="stylesheet" href="app.css" />
<script src="dist/jodit.js"></script>
<script>
    editor = new Jodit('#editor');
    Jodit.instances.editor.selection.insertNode(document.createElement('span'));
    Jodit.instances.editor.selection.insertNode(document.createTextNode('Test'));
    function simpleKeys (original) {
        var newobject = {};
        for(var key in original) {
            newobject[key] = typeof original[key] === 'object' ? '{ ... }' : original[key];
        }
        return newobject;
    }
    var timeout,
        callback = function (e) {
            clearTimeout(timeout);
            timeout = setTimeout(function () {
                mirror.value = editor.editor.innerHTML;
                if (e) {
                    //consoles.value = JSON.stringify(simpleKeys(e)) + "\n\n" + consoles.value
                    //consoles.scrollTop=100000;
                }
            }, 100)
        }
    editor.editor.addEventListener('keydown', callback)
    editor.editor.addEventListener('keyup', callback)
    editor.editor.addEventListener('mousedown', callback)
    editor.editor.addEventListener('mouseup', callback)
    editor.editor.addEventListener('input', callback)
    editor.events.on('change', callback)
    var fill = [];
    fill.length = 3;
    fill.fill(10);
    editor.setEditorValue('<table style="width:100%">' +
        fill.map(function (i, row) {
            return '<tr>' +
                fill.map(function (j, column) {
                    return '<td>' + row + ',' + column + '</td>'
                }).join('') +
                '</tr>';
        }).join('') +
        '</table>');



    //var table = new Jodit.modules.Table(editor);
    //editor.selection.setCursorIn(editor.editor.querySelector('td'));

//    simulateEvent('mousedown', 1, editor.editor.querySelectorAll('td')[0]);
//    simulateEvent('mousemove', 1, editor.editor.querySelectorAll('td')[7]);
//    simulateEvent('mouseup', 1, editor.editor.querySelectorAll('td')[7]);
    //editor.execCommand('mergeSelectedCells')
    merge.addEventListener('mousedown', function () {
        editor.execCommand('mergeSelectedCells')
        return false;
    })
    splitvertical.addEventListener('mousedown', function () {
        editor.execCommand('splitVertical')
        return false;
    })
    splithorizontal.addEventListener('mousedown', function () {
        editor.execCommand('splitHorizontal')
        return false;
    })
    callback();
</script>
</html>